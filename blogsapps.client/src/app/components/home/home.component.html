<div class="container">
  <div class="header">
    <p>
      <mat-toolbar class="header-navigation" color="primary">

        <div class="logo">
          <img class="img-logo"
            src="https://scontent.fclo8-1.fna.fbcdn.net/v/t39.30808-6/457474868_122094825464514277_6337982021611361056_n.jpg?_nc_cat=108&ccb=1-7&_nc_sid=127cfc&_nc_ohc=7yxk68vUgkAQ7kNvgGOgijQ&_nc_ht=scontent.fclo8-1.fna&oh=00_AYCbHyzd-0uEZuAX_wM4XbjSxxsmssrnq993c7bcVcfczg&oe=66D93C35"
            alt="Logo">
        </div>
        <span class="example-spacer"></span>
        <!-- Formulario de búsqueda -->
        <form class="example-form">
          <div class="form-container-search">
            <mat-form-field class="example-full-width">
              <input type="text" placeholder="Buscar usuario" aria-label="Search" matInput
                [formControl]="controlCambios" [matAutocomplete]="auto" class="custom-input" />
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let user of filteredUsers | async" [value]="user.username">
                  {{ user.username }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
        </form>

        <span class="example-spacer"></span>

        <button mat-icon-button *ngIf="rol === ''" class="example-icon" (click)="Login()" aria-label="Login">
          <mat-icon>login</mat-icon>
        </button>

        <button mat-icon-button *ngIf="rol !== ''" class="example-icon" (click)="revisarPerfil('me')"
          aria-label="Profile">
          <mat-icon>account_circle</mat-icon>
        </button>
        <button mat-icon-button *ngIf="rol !== ''" class="example-icon" (click)="Logout()" aria-label="Profile">
          <mat-icon>exit_to_app</mat-icon>
        </button>

        <!-- <button mat-icon-button class="example-icon" aria-label="Example icon-button with menu icon">
          <mat-icon>menu</mat-icon>
        </button> -->
      </mat-toolbar>
    </p>
  </div>

  <div class="body" *ngFor="let usuario of forMe">
    <mat-card class="example-card">
      <div class="revisarPerfil" (click)="revisarPerfil(usuario.userId)">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title class="user_name">{{usuario.username}}</mat-card-title>
          <mat-card-subtitle class="user">{{usuario.user}}</mat-card-subtitle>
        </mat-card-header>
      </div>
      <mat-card-content>
        <h5 class="titulo">{{ usuario.title }}</h5>
        <h6 class="contenido">{{ usuario.descripcion}}</h6>
        <h6 class="publicacion">{{ usuario.pubDate}}</h6>
        <mat-card-actions>
          <div class="reacciones">
            <button (click)="like(usuario.postId)" mat-button><mat-icon class="like">thumb_up</mat-icon></button>
            <button (click)="comment(usuario.postId)" *ngIf="rol === 'Admin' || rol ==='Autor'" mat-button><mat-icon
                class="comment">comment</mat-icon></button>
            <button (click)="share()" mat-button><mat-icon class="share">share</mat-icon></button>
            <button (click)="delete()" *ngIf="rol === 'Admin'" mat-button><mat-icon
                class="delete">delete</mat-icon></button>
          </div>
        </mat-card-actions>
      </mat-card-content>
      <!-- <div class="imagen">
        <img mat-card-image class="image" [src]="usuario.imageUrl" alt="Foto de {{ usuario.username }}">
      </div> -->


      <mat-card-actions *ngIf="comentario">
        <!-- comments.component.html -->
        <div class="comments-container">
          <!-- Comentarios existentes -->
          <div class="comments-list">
            <div class="comment-item">
              <div class="comment-author">Juan Pérez</div>
              <div class="comment-text">¡Este es un gran post! Me ayudó mucho a entender el tema.</div>
              <div class="comment-date">1 de septiembre de 2024</div>
            </div>

            <div class="comment-item">
              <div class="comment-author">María Gómez</div>
              <div class="comment-text">Gracias por la información. Estaba buscando algo así.</div>
              <div class="comment-date">2 de septiembre de 2024</div>
            </div>

            <div class="comment-item">
              <div class="comment-author">Carlos López</div>
              <div class="comment-text">Muy interesante, pero me gustaría más ejemplos prácticos.</div>
              <div class="comment-date">3 de septiembre de 2024</div>
            </div>
          </div>

          <button *ngIf="!comentarPostFlag" (click)="comentarPost()" mat-raised-button color="primary"
            type="submit">Comentar</button>

          <!-- Formulario para añadir un nuevo comentario -->
          <form class="comment-form" *ngIf="comentarPostFlag">
            <div class="comentario">
              <mat-form-field appearance="fill">
                <mat-label>Comentario</mat-label>
                <textarea matInput [(ngModel)]="nuevoComentario" name="comentario"
                  placeholder="Tu comentario"></textarea>
              </mat-form-field>
            </div>
            <div class="guardarComentario">
              <button (click)="guardarComentario()" mat-raised-button color="primary" type="submit">Publicar
                comentario</button>
            </div>
          </form>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>
</div>